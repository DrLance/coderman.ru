/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.3.0 (TBD)
 */
!function(r){"use strict";function e(){}function l(e){return function(){return e}}function t(n){return function(e){return!n(e)}}function n(){return a}var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=l(!1),u=l(!0),a={fold:function(e,n){return e()},is:i,isSome:i,isNone:u,getOr:f,getOrThunk:c,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(undefined),or:f,orThunk:c,map:n,each:e,bind:n,exists:i,forall:u,filter:n,equals:s,equals_:s,toArray:function(){return[]},toString:l("none()")};function s(e){return e.isNone()}function c(e){return e()}function f(e){return e}function d(n){return function(e){return function(e){var n=typeof e;return null===e?"null":"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(e)===n}}function m(n){return function(e){return typeof e===n}}function g(e,n){for(var t=e.length,r=new Array(t),o=0;o<t;o++){var i=e[o];r[o]=n(i,o)}return r}function p(e,n){for(var t=0,r=e.length;t<r;t++){n(e[t],t)}}function v(e,n){for(var t=[],r=0,o=e.length;r<o;r++){var i=e[r];n(i,r)&&t.push(i)}return t}function h(e,n,t){return p(e,function(e){t=n(t,e)}),t}function N(e,n){for(var t=0,r=e.length;t<r;t++){var o=e[t];if(n(o,t))return Ze.some(o)}return Ze.none()}function y(e,n){return function(e){for(var n=[],t=0,r=e.length;t<r;++t){if(!nn(e[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+e);an.apply(n,e[t])}return n}(g(e,n))}function O(e){return 0===e.length?Ze.none():Ze.some(e[0])}function S(e){return 0===e.length?Ze.none():Ze.some(e[e.length-1])}function C(e,n){var t=function(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.test(n))return r}return undefined}(e,n);if(!t)return{major:0,minor:0};function r(e){return Number(n.replace(t,"$"+e))}return dn(r(1),r(2))}function b(e,n){var t=String(n).toLowerCase();return N(e,function(e){return e.search(t)})}function T(e,n){return-1!==e.indexOf(n)}function D(n){return function(e){return T(e,n)}}function E(e,n){return e.dom()===n.dom()}function L(e,n,t){return e.isSome()&&n.isSome()?Ze.some(t(e.getOrDie(),n.getOrDie())):Ze.none()}function w(e){return Ze.from(e.dom().parentNode).map(Pn.fromDom)}function k(e){return g(e.dom().childNodes,Pn.fromDom)}function x(e,n){var t=e.dom().childNodes;return Ze.from(t[n]).map(Pn.fromDom)}function A(e){return x(e,0)}function I(e){return x(e,e.dom().childNodes.length-1)}function R(n,t){w(n).each(function(e){e.dom().insertBefore(t.dom(),n.dom())})}function B(e,n){e.dom().appendChild(n.dom())}function P(n,e){p(e,function(e){B(n,e)})}function _(e){var n=e.dom();null!==n.parentNode&&n.parentNode.removeChild(n)}function M(e,n,t){return e.fire("ListMutation",{action:n,element:t})}function U(e){return e&&3===e.nodeType}function F(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)}function H(e){return e&&/^(OL|UL)$/.test(e.nodeName)}function $(e){return e&&/^(DT|DD)$/.test(e.nodeName)}function j(e){return e&&/^(TH|TD)$/.test(e.nodeName)}function q(e){return e&&"BR"===e.nodeName}function K(e,n){return n&&!!e.schema.getTextBlockElements()[n.nodeName]}function V(e,n){return e&&e.nodeName in n}function W(e,n,t){var r=e.isEmpty(n);return!(t&&0<e.select("span[data-mce-type=bookmark]",n).length)&&r}function X(e,n){return e.isChildOf(n,e.getRoot())}function Q(e){var n=e.selection.getStart(!0);return e.dom.getParent(n,"OL,UL,DL",Vn(e,n))}function Y(e){var n=Q(e),t=e.selection.getSelectedBlocks();return function(e,n){return e&&1===n.length&&n[0]===e}(n,t)?function(e){return Kn.grep(e.querySelectorAll("ol,ul,dl"),function(e){return F(e)})}(n):Kn.grep(t,function(e){return F(e)&&n!==e})}function z(e){var n=e.selection.getSelectedBlocks();return Kn.grep(function(t,e){var n=Kn.map(e,function(e){var n=t.dom.getParent(e,"li,dd,dt",Vn(t,e));return n||e});return qn.unique(n)}(e,n),function(e){return function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)}(e)})}function G(e,n){var t=e.dom.getParents(n,"ol,ul",Vn(e,n));return S(t)}function J(e){var n=function(e){var n=G(e,e.selection.getStart()),t=v(e.selection.getSelectedBlocks(),H);return n.toArray().concat(t)}(e);return Wn(e,n)}function Z(e,n){var t,r,o,i=e.dom,u=e.schema.getBlockElements(),a=i.createFragment(),s=function(e){var n=e.getParam("forced_root_block","p");return!1===n?"":!0===n?"p":n}(e);if(s&&((r=i.create(s)).tagName===s.toUpperCase()&&i.setAttribs(r,function(e){return e.getParam("forced_root_block_attrs",{})}(e)),V(n.firstChild,u)||a.appendChild(r)),n)for(;t=n.firstChild;){var c=t.nodeName;o||"SPAN"===c&&"bookmark"===t.getAttribute("data-mce-type")||(o=!0),V(t,u)?(a.appendChild(t),r=null):s?(r||(r=i.create(s),a.appendChild(r)),r.appendChild(t)):a.appendChild(t)}return s?o||r.appendChild(i.create("br",{"data-mce-bogus":"1"})):a.appendChild(i.create("br")),a}function ee(e){return e.dom().nodeName.toLowerCase()}function ne(e,n){var t=e.dom();!function(e,n){for(var t=Xn(e),r=0,o=t.length;r<o;r++){var i=t[r];n(e[i],i)}}(n,function(e,n){!function(e,n,t){if(!(en(t)||tn(t)||on(t)))throw r.console.error("Invalid call to Attr.set. Key ",n,":: Value ",t,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,t+"")}(t,n,e)})}function te(e){return h(e.dom().attributes,function(e,n){return e[n.name]=n.value,e},{})}function re(e,n,t){if(!en(t))throw r.console.error("Invalid call to CSS.set. Property ",n,":: Value ",t,":: Element ",e),new Error("CSS value must be a string: "+t);!function(e){return e.style!==undefined&&rn(e.style.getPropertyValue)}(e)||e.style.setProperty(n,t)}function oe(e){return function(e,n){return Pn.fromDom(e.dom().cloneNode(n))}(e,!0)}function ie(e,n){var t=function(e,n){var t=Pn.fromTag(n),r=te(e);return ne(t,r),t}(e,n);R(e,t);var r=k(e);return P(t,r),_(e),t}function ue(e,n){B(e.item,n.list)}function ae(n,e,t){var r=e.slice(0,t.depth);return S(r).each(function(e){!function(e,n){B(e.list,n),e.item=n}(e,function(e,n,t){var r=Pn.fromTag("li",e);return ne(r,n),P(r,t),r}(n,t.itemAttributes,t.content)),function(e,n){ee(e.list)!==n.listType&&(e.list=ie(e.list,n.listType)),ne(e.list,n.listAttributes)}(e,t)}),r}function se(e,n,t){var r=function(e,n,t){for(var r,o,i,u=[],a=0;a<t;a++)u.push((r=e,o=n.listType,void 0,i={list:Pn.fromTag(o,r),item:Pn.fromTag("li",r)},B(i.list,i.item),i));return u}(e,t,t.depth-n.length);return function(e){for(var n=1;n<e.length;n++)ue(e[n-1],e[n])}(r),function(e,n){for(var t=0;t<e.length-1;t++)r=e[t].item,o="list-style-type",i="none",void 0,u=r.dom(),re(u,o,i);var r,o,i,u;S(e).each(function(e){ne(e.list,n.listAttributes),ne(e.item,n.itemAttributes),P(e.item,n.content)})}(r,t),function(e,n){L(S(e),O(n),ue)}(n,r),n.concat(r)}function ce(e){return Fn(e,"OL,UL")}function fe(e){return A(e).map(ce).getOr(!1)}function de(e){return 0<e.depth}function le(e){return e.isSelected}function me(e){var n=k(e),t=function(e){return I(e).map(ce).getOr(!1)}(e)?n.slice(0,-1):n;return g(t,oe)}function ge(t){p(t,function(n,e){(function(e,n){for(var t=e[n].depth,r=n-1;0<=r;r--){if(e[r].depth===t)return Ze.some(e[r]);if(e[r].depth<t)break}return Ze.none()})(t,e).each(function(e){!function(e,n){e.listType=n.listType,e.listAttributes=sn({},n.listAttributes)}(n,e)})})}function pe(t,r,o,i){return A(i).filter(ce).fold(function(){r.each(function(e){E(e.start,i)&&o.set(!0)});var e=function(n,t,r){return w(n).filter(Qn).map(function(e){return{depth:t,isSelected:r,content:me(n),itemAttributes:te(n),listAttributes:te(e),listType:ee(e)}})}(i,t,o.get());r.each(function(e){E(e.end,i)&&o.set(!1)});var n=I(i).filter(ce).map(function(e){return Yn(t,r,o,e)}).getOr([]);return e.toArray().concat(n)},function(e){return Yn(t,r,o,e)})}function ve(t,e){return g(e,function(e){var n=function(e,n){var t=(n||r.document).createDocumentFragment();return p(e,function(e){t.appendChild(e.dom())}),Pn.fromDom(t)}(e.content);return Pn.fromDom(Z(t,n.dom()))})}function he(e,n){return ge(n),function(t,e){var n=h(e,function(e,n){return n.depth>e.length?se(t,e,n):ae(t,e,n)},[]);return O(n).map(function(e){return e.list})}(e.contentDocument,n).toArray()}function Ne(e){var n=g(z(e),Pn.fromDom);return L(N(n,t(fe)),N(function(e){var n=un.call(e,0);return n.reverse(),n}(n),t(fe)),function(e,n){return{start:e,end:n}})}function ye(t,e,r){var n=function(e,n){var t=cn(!1);return g(e,function(e){return{sourceList:e,entries:Yn(0,n,t,e)}})}(e,Ne(t));p(n,function(e){!function(e,n){p(v(e,le),function(e){return function(e,n){switch(e){case"Indent":n.depth++;break;case"Outdent":n.depth--;break;case"Flatten":n.depth=0}}(n,e)})}(e.entries,r);var n=function(n,e){return y(function(e,n){if(0===e.length)return[];for(var t=n(e[0]),r=[],o=[],i=0,u=e.length;i<u;i++){var a=e[i],s=n(a);s!==t&&(r.push(o),o=[]),t=s,o.push(a)}return 0!==o.length&&r.push(o),r}(e,de),function(e){return O(e).map(de).getOr(!1)?he(n,e):ve(n,e)})}(t,e.entries);p(n,function(e){M(t,"Indent"===r?"IndentList":"OutdentList",e.dom())}),function(n,e){p(e,function(e){R(n,e)})}(e.sourceList,n),_(e.sourceList)})}function Oe(n,t){Fn(t,"dd")?ie(t,"dt"):Fn(t,"dt")&&w(t).each(function(e){return function(e,n,t){var r,o,i,u,a,s;for(i=Gn.select('span[data-mce-type="bookmark"]',n),a=Z(e,t),(r=Gn.createRng()).setStartAfter(t),r.setEndAfter(n),u=(o=r.extractContents()).firstChild;u;u=u.firstChild)if("LI"===u.nodeName&&e.dom.isEmpty(u)){Gn.remove(u);break}e.dom.isEmpty(o)||Gn.insertAfter(o,n),Gn.insertAfter(a,n),W(e.dom,t.parentNode)&&(s=t.parentNode,Kn.each(i,function(e){s.parentNode.insertBefore(e,t.parentNode)}),Gn.remove(s)),Gn.remove(t),W(e.dom,n)&&Gn.remove(n)}(n,e.dom(),t.dom())})}function Se(e){Fn(e,"dt")&&ie(e,"dd")}function Ce(e,n){if(U(e))return{container:e,offset:n};var t=Hn.getNode(e,n);return U(t)?{container:t,offset:n>=e.childNodes.length?t.data.length:0}:t.previousSibling&&U(t.previousSibling)?{container:t.previousSibling,offset:t.previousSibling.data.length}:t.nextSibling&&U(t.nextSibling)?{container:t.nextSibling,offset:0}:{container:e,offset:n}}function be(e){var n=e.cloneRange(),t=Ce(e.startContainer,e.startOffset);n.setStart(t.container,t.offset);var r=Ce(e.endContainer,e.endOffset);return n.setEnd(r.container,r.offset),n}function Te(e,n){var t=g(J(e),Pn.fromDom),r=g(function(e){return v(z(e),$)}(e),Pn.fromDom),o=!1;if(t.length||r.length){var i=e.selection.getBookmark();ye(e,t,n),function(n,e,t){p(t,"Indent"===e?Se:function(e){return Oe(n,e)})}(e,n,r),e.selection.moveToBookmark(i),e.selection.setRng(be(e.selection.getRng())),e.nodeChanged(),o=!0}return o}function De(e){return Te(e,"Indent")}function Ee(e){return Te(e,"Outdent")}function Le(e){return Te(e,"Flatten")}function we(o){function e(e){var n,t,r;t=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"],1===t.nodeType&&(n=Zn.create("span",{"data-mce-type":"bookmark"}),t.hasChildNodes()?(r=Math.min(r,t.childNodes.length-1),e?t.insertBefore(n,t.childNodes[r]):Zn.insertAfter(n,t.childNodes[r])):t.appendChild(n),t=n,r=0),i[e?"startContainer":"endContainer"]=t,i[e?"startOffset":"endOffset"]=r}var i={};return e(!0),o.collapsed||e(),i}function ke(o){function e(e){var n,t,r;n=r=o[e?"startContainer":"endContainer"],t=o[e?"startOffset":"endOffset"],n&&(1===n.nodeType&&(t=function(e){for(var n=e.parentNode.firstChild,t=0;n;){if(n===e)return t;1===n.nodeType&&"bookmark"===n.getAttribute("data-mce-type")||t++,n=n.nextSibling}return-1}(n),n=n.parentNode,Zn.remove(r),!n.hasChildNodes()&&Zn.isBlock(n)&&n.appendChild(Zn.create("br"))),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=t)}e(!0),e();var n=Zn.createRng();return n.setStart(o.startContainer,o.startOffset),o.endContainer&&n.setEnd(o.endContainer,o.endOffset),be(n)}function xe(e){return/\btox\-/.test(e.className)}function Ae(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}}function Ie(t,e){Kn.each(e,function(e,n){t.setAttribute(n,e)})}function Re(e,n,t){!function(e,n,t){var r=t["list-style-type"]?t["list-style-type"]:null;e.setStyle(n,"list-style-type",r)}(e,n,t),function(e,n,t){Ie(n,t["list-attributes"]),Kn.each(e.select("li",n),function(e){Ie(e,t["list-item-attributes"])})}(e,n,t)}function Be(e,n,t,r){var o,i;for(o=n[t?"startContainer":"endContainer"],i=n[t?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!t&&q(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(K(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function Pe(r,o,i){void 0===i&&(i={});var e,n=r.selection.getRng(!0),u="LI",t=Vn(r,r.selection.getStart(!0)),a=r.dom;"false"!==a.getContentEditable(r.selection.getNode())&&("DL"===(o=o.toUpperCase())&&(u="DT"),e=we(n),Kn.each(function(t,e,r){for(var o,i=[],u=t.dom,n=Be(t,e,!0,r),a=Be(t,e,!1,r),s=[],c=n;c&&(s.push(c),c!==a);c=c.nextSibling);return Kn.each(s,function(e){if(K(t,e))return i.push(e),void(o=null);if(u.isBlock(e)||q(e))return q(e)&&u.remove(e),void(o=null);var n=e.nextSibling;Jn.isBookmarkNode(e)&&(K(t,n)||!n&&e.parentNode===r)?o=null:(o||(o=u.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e))}),i}(r,n,t),function(e){var n,t;(t=e.previousSibling)&&F(t)&&t.nodeName===o&&function(e,n,t){var r=e.getStyle(n,"list-style-type"),o=t?t["list-style-type"]:"";return r===(o=null===o?"":o)}(a,t,i)?(n=t,e=a.rename(e,u),t.appendChild(e)):(n=a.create(o),e.parentNode.insertBefore(n,e),n.appendChild(e),e=a.rename(e,u)),function(t,r,e){Kn.each(e,function(e){var n;return t.setStyle(r,((n={})[e]="",n))})}(a,e,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Re(a,n,i),et(r.dom,n)}),r.selection.setRng(ke(e)))}function _e(e,n,t){return function(e,n){return e&&n&&F(e)&&e.nodeName===n.nodeName}(n,t)&&function(e,n,t){return e.getStyle(n,"list-style-type",!0)===e.getStyle(t,"list-style-type",!0)}(e,n,t)&&function(e,n){return e.className===n.className}(n,t)}function Me(n,e,t,r,o){if(e.nodeName!==r||nt(o)){var i=we(n.selection.getRng(!0));Kn.each([e].concat(t),function(e){!function(e,n,t,r){if(n.nodeName!==t){var o=e.dom.rename(n,t);Re(e.dom,o,r),M(e,Ae(t),o)}else Re(e.dom,n,r),M(e,Ae(t),n)}(n,e,r,o)}),n.selection.setRng(ke(i))}else Le(n)}function Ue(e,n,t){var r=Q(e),o=Y(e);t=t||{},r&&0<o.length?Me(e,r,o,n,t):function(e,n,t,r){if(n!==e.getBody())if(n)if(n.nodeName!==t||nt(r)||xe(n)){var o=we(e.selection.getRng(!0));Re(e.dom,n,r);var i=e.dom.rename(n,t);et(e.dom,i),e.selection.setRng(ke(o)),M(e,Ae(t),i)}else Le(e);else Pe(e,t,r),M(e,Ae(t),n)}(e,r,n,t)}function Fe(n,e){Kn.each(Kn.grep(n.select("ol,ul",e)),function(e){!function(e,n){var t,r=n.parentNode;"LI"===r.nodeName&&r.firstChild===n&&((t=r.previousSibling)&&"LI"===t.nodeName?(t.appendChild(n),W(e,r)&&tt.remove(r)):tt.setStyle(r,"listStyleType","none")),F(r)&&(t=r.previousSibling)&&"LI"===t.nodeName&&t.appendChild(n)}(n,e)})}function He(e,n,t,r){var o=n.startContainer,i=n.startOffset;if(U(o)&&(t?i<o.data.length:0<i))return o;var u=e.schema.getNonEmptyElements();1===o.nodeType&&(o=Hn.getNode(o,i));var a=new $n(o,r);for(t&&(!function(e,n){return!!q(n)&&!(!e.isBlock(n.nextSibling)||q(n.previousSibling))}(e.dom,o)||a.next());o=a[t?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(u[o.nodeName])return o;if(U(o)&&0<o.data.length)return o}}function $e(e,n){var t=n.childNodes;return 1===t.length&&!F(t[0])&&e.isBlock(t[0])}function je(e,n,t){var r,o;if(o=$e(e,t)?t.firstChild:t,function(e,n){$e(e,n)&&e.remove(n.firstChild,!0)}(e,n),!W(e,n,!0))for(;r=n.firstChild;)o.appendChild(r)}function qe(n,e,t){var r,o,i=e.parentNode;if(X(n,e)&&X(n,t)){F(t.lastChild)&&(o=t.lastChild),i===t.lastChild&&q(i.previousSibling)&&n.remove(i.previousSibling),(r=t.lastChild)&&q(r)&&e.hasChildNodes()&&n.remove(r),W(n,t,!0)&&n.$(t).empty(),je(n,e,t),o&&t.appendChild(o);var u=Un(Pn.fromDom(t),Pn.fromDom(e))?n.getParents(e,F,t):[];n.remove(e),p(u,function(e){W(n,e)&&e!==n.getRoot()&&n.remove(e)})}}function Ke(e,n,t,r){var o=e.dom;if(o.isEmpty(r))!function(e,n,t){e.dom.$(t).empty(),qe(e.dom,n,t),e.selection.setCursorLocation(t)}(e,t,r);else{var i=we(n);qe(o,t,r),e.selection.setRng(ke(i))}}function Ve(e,n){var t=e.dom,r=e.selection,o=r.getStart(),i=Vn(e,o),u=t.getParent(r.getStart(),"LI",i);if(u){var a=u.parentNode;if(a===e.getBody()&&W(t,a))return!0;var s=be(r.getRng()),c=t.getParent(He(e,s,n,i),"LI",i);if(c&&c!==u)return e.undoManager.transact(function(){n?Ke(e,s,c,u):function(e){return e.parentNode.firstChild===e}(u)?Ee(e):function(e,n,t,r){var o=we(n);qe(e.dom,t,r);var i=ke(o);e.selection.setRng(i)}(e,s,u,c)}),!0;if(!c&&!n&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact(function(){Le(e)}),!0}return!1}function We(e,n){return Ve(e,n)||function(e,n){var t=e.dom,r=e.selection.getStart(),o=Vn(e,r),i=t.getParent(r,t.isBlock,o);if(i&&t.isEmpty(i)){var u=be(e.selection.getRng()),a=t.getParent(He(e,u,n,o),"LI",o);if(a)return e.undoManager.transact(function(){!function(e,n,t){var r=e.getParent(n.parentNode,e.isBlock,t);e.remove(n),r&&e.isEmpty(r)&&e.remove(r)}(t,i,o),et(t,a.parentNode),e.selection.select(a,!0),e.selection.collapse(n)}),!0}return!1}(e,n)}function Xe(e,n){return e.selection.isCollapsed()?We(e,n):function(e){var n=e.selection.getStart(),t=Vn(e,n);return!!(e.dom.getParent(n,"LI,DT,DD",t)||0<z(e).length)&&(e.undoManager.transact(function(){e.execCommand("Delete"),Fe(e.dom,e.getBody())}),!0)}(e)}function Qe(n,t){return function(){var e=n.dom.getParent(n.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===t}}function Ye(e){!function(e){return e.getParam("lists_indent_on_tab",!0)}(e)||function(n){n.on("keydown",function(e){e.keyCode!==jn.TAB||jn.metaKeyPressed(e)||n.undoManager.transact(function(){(e.shiftKey?Ee(n):De(n))&&e.preventDefault()})})}(e),function(n){n.on("keydown",function(e){e.keyCode===jn.BACKSPACE?Xe(n,!1)&&e.preventDefault():e.keyCode===jn.DELETE&&Xe(n,!0)&&e.preventDefault()})}(e)}function ze(n,i){return function(o){function e(e){var n=function(e,n){for(var t=0;t<e.length;t++){if(n(e[t]))return t}return-1}(e.parents,j),t=-1!==n?e.parents.slice(0,n):e.parents,r=Kn.grep(t,F);o.setActive(0<r.length&&r[0].nodeName===i&&!xe(r[0]))}return n.on("NodeChange",e),function(){return n.off("NodeChange",e)}}}var Ge,Je=function(t){function e(){return o}function n(e){return e(t)}var r=l(t),o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:u,isNone:i,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return Je(e(t))},each:function(e){e(t)},bind:n,exists:n,forall:n,filter:function(e){return e(t)?o:a},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(i,function(e){return n(t,e)})}};return o},Ze={some:Je,none:n,from:function(e){return null===e||e===undefined?a:Je(e)}},en=d("string"),nn=d("array"),tn=m("boolean"),rn=m("function"),on=m("number"),un=Array.prototype.slice,an=Array.prototype.push,sn=function(){return(sn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},cn=function(e){function n(){return t}var t=e;return{get:n,set:function(e){t=e},clone:function(){return cn(n())}}},fn=function(){return dn(0,0)},dn=function(e,n){return{major:e,minor:n}},ln={nu:dn,detect:function(e,n){var t=String(n).toLowerCase();return 0===e.length?fn():C(e,t)},unknown:fn},mn="Edge",gn="Chrome",pn="Opera",vn="Firefox",hn="Safari",Nn=function(e){function n(e){return function(){return t===e}}var t=e.current,r=e.version;return{current:t,version:r,isEdge:n(mn),isChrome:n(gn),isIE:n("IE"),isOpera:n(pn),isFirefox:n(vn),isSafari:n(hn)}},yn={unknown:function(){return Nn({current:undefined,version:ln.unknown()})},nu:Nn,edge:l(mn),chrome:l(gn),ie:l("IE"),opera:l(pn),firefox:l(vn),safari:l(hn)},On="Windows",Sn="Android",Cn="Solaris",bn="FreeBSD",Tn="ChromeOS",Dn=function(e){function n(e){return function(){return t===e}}var t=e.current,r=e.version;return{current:t,version:r,isWindows:n(On),isiOS:n("iOS"),isAndroid:n(Sn),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(Cn),isFreeBSD:n(bn),isChromeOS:n(Tn)}},En={unknown:function(){return Dn({current:undefined,version:ln.unknown()})},nu:Dn,windows:l(On),ios:l("iOS"),android:l(Sn),linux:l("Linux"),osx:l("OSX"),solaris:l(Cn),freebsd:l(bn),chromeos:l(Tn)},Ln=function(e,t){return b(e,t).map(function(e){var n=ln.detect(e.versionRegexes,t);return{current:e.name,version:n}})},wn=function(e,t){return b(e,t).map(function(e){var n=ln.detect(e.versionRegexes,t);return{current:e.name,version:n}})},kn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,xn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return T(e,"edge/")&&T(e,"chrome")&&T(e,"safari")&&T(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,kn],search:function(e){return T(e,"chrome")&&!T(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return T(e,"msie")||T(e,"trident")}},{name:"Opera",versionRegexes:[kn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:D("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:D("firefox")},{name:"Safari",versionRegexes:[kn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(T(e,"safari")||T(e,"mobile/"))&&T(e,"applewebkit")}}],An=[{name:"Windows",search:D("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return T(e,"iphone")||T(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:D("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:D("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:D("linux"),versionRegexes:[]},{name:"Solaris",search:D("sunos"),versionRegexes:[]},{name:"FreeBSD",search:D("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:D("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],In={browsers:l(xn),oses:l(An)},Rn=cn(function(e,n){var t=In.browsers(),r=In.oses(),o=Ln(t,e).fold(yn.unknown,yn.nu),i=wn(r,e).fold(En.unknown,En.nu);return{browser:o,os:i,deviceType:function(e,n,t,r){var o=e.isiOS()&&!0===/ipad/i.test(t),i=e.isiOS()&&!o,u=e.isiOS()||e.isAndroid(),a=u||r("(pointer:coarse)"),s=o||!i&&u&&r("(min-device-width:768px)"),c=i||u&&!s,f=n.isSafari()&&e.isiOS()&&!1===/safari/i.test(t),d=!c&&!s&&!f;return{isiPad:l(o),isiPhone:l(i),isTablet:l(s),isPhone:l(c),isTouch:l(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:l(f),isDesktop:l(d)}}(i,o,e,n)}}(r.navigator.userAgent,function(e){return r.window.matchMedia(e).matches})),Bn=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:l(e)}},Pn={fromHtml:function(e,n){var t=(n||r.document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw r.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Bn(t.childNodes[0])},fromTag:function(e,n){var t=(n||r.document).createElement(e);return Bn(t)},fromText:function(e,n){var t=(n||r.document).createTextNode(e);return Bn(t)},fromDom:Bn,fromPoint:function(e,n,t){var r=e.dom();return Ze.from(r.elementFromPoint(n,t)).map(Bn)}},_n=(r.Node.ATTRIBUTE_NODE,r.Node.CDATA_SECTION_NODE,r.Node.COMMENT_NODE,r.Node.DOCUMENT_NODE,r.Node.DOCUMENT_TYPE_NODE,r.Node.DOCUMENT_FRAGMENT_NODE,r.Node.ELEMENT_NODE),Mn=(r.Node.TEXT_NODE,r.Node.PROCESSING_INSTRUCTION_NODE,r.Node.ENTITY_REFERENCE_NODE,r.Node.ENTITY_NODE,r.Node.NOTATION_NODE,_n),Un=Rn.get().browser.isIE()?function(e,n){return function(e,n){return function(e,n,t){return 0!=(e.compareDocumentPosition(n)&t)}(e,n,r.Node.DOCUMENT_POSITION_CONTAINED_BY)}(e.dom(),n.dom())}:function(e,n){var t=e.dom(),r=n.dom();return t!==r&&t.contains(r)},Fn=function(e,n){var t=e.dom();if(t.nodeType!==Mn)return!1;var r=t;if(r.matches!==undefined)return r.matches(n);if(r.msMatchesSelector!==undefined)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==undefined)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==undefined)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},Hn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),$n=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),jn=tinymce.util.Tools.resolve("tinymce.util.VK"),qn=("undefined"!=typeof r.window?r.window:Function("return this;")(),tinymce.util.Tools.resolve("tinymce.dom.DomQuery")),Kn=tinymce.util.Tools.resolve("tinymce.util.Tools"),Vn=function(e,n){var t=e.dom.getParents(n,"TD,TH");return 0<t.length?t[0]:e.getBody()},Wn=function(n,e){var t=g(e,function(e){return G(n,e).getOr(e)});return qn.unique(t)},Xn=Object.keys,Qn=(Ge=_n,function(e){return function(e){return e.dom().nodeType}(e)===Ge}),Yn=function(n,t,r,e){return y(k(e),function(e){return(ce(e)?Yn:pe)(n+1,t,r,e)})},zn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Gn=zn.DOM,Jn=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Zn=zn.DOM,et=function(e,n){var t,r;if(t=n.nextSibling,_e(e,n,t)){for(;r=t.firstChild;)n.appendChild(r);e.remove(t)}if(t=n.previousSibling,_e(e,n,t)){for(;r=t.lastChild;)n.insertBefore(r,n.firstChild);e.remove(t)}},nt=function(e){return"list-style-type"in e},tt=zn.DOM;!function rt(){o.add("lists",function(e){return Ye(e),function(n){function e(e){return function(){return n.execCommand(e)}}var t,r,o;r="advlist",o=(t=n).settings.plugins?t.settings.plugins:"",-1===Kn.inArray(o.split(/[ ,]/),r)&&(n.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:e("InsertOrderedList"),onSetup:ze(n,"OL")}),n.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:e("InsertUnorderedList"),onSetup:ze(n,"UL")}))}(e),function(t){t.on("BeforeExecCommand",function(e){var n=e.command.toLowerCase();"indent"===n?De(t):"outdent"===n&&Ee(t)}),t.addCommand("InsertUnorderedList",function(e,n){Ue(t,"UL",n)}),t.addCommand("InsertOrderedList",function(e,n){Ue(t,"OL",n)}),t.addCommand("InsertDefinitionList",function(e,n){Ue(t,"DL",n)}),t.addCommand("RemoveList",function(){Le(t)}),t.addQueryStateHandler("InsertUnorderedList",Qe(t,"UL")),t.addQueryStateHandler("InsertOrderedList",Qe(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",Qe(t,"DL"))}(e),function(n){return{backspaceDelete:function(e){Xe(n,e)}}}(e)})}()}(window);