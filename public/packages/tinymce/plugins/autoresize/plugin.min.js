/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.3.0 (TBD)
 */
!function(){"use strict";function d(e){return e.getParam("min_height",e.getElement().offsetHeight,"number")}function h(e,t){var n=e.getBody();n&&(n.style.overflowY=t?"":"hidden",t||(n.scrollTop=0))}function v(e,t,n,i){var o=parseInt(e.getStyle(t,n,i),10);return isNaN(o)?0:o}var i=function(e){function t(){return n}var n=e;return{get:t,set:function(e){n=e},clone:function(){return i(t())}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=tinymce.util.Tools.resolve("tinymce.Env"),r=tinymce.util.Tools.resolve("tinymce.util.Delay"),u=function(e,t,n,i,o){r.setEditorTimeout(e,function(){p(e,t),n--?u(e,t,n,i,o):o&&o()},i)},p=function(e,t){var n,i,o,r=e.dom,u=e.getDoc();if(u)if(function(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()}(e))h(e,!0);else{var a=u.documentElement,s=function(e){return e.getParam("autoresize_bottom_margin",50,"number")}(e);i=d(e);var f=v(r,a,"margin-top",!0),c=v(r,a,"margin-bottom",!0);(o=a.offsetHeight+f+c+s)<0&&(o=0);var g=e.getContainer().offsetHeight-e.getContentAreaContainer().offsetHeight;o+g>d(e)&&(i=o+g);var l=function(e){return e.getParam("max_height",0,"number")}(e);if(l&&l<i?(i=l,h(e,!0)):h(e,!1),i!==t.get()){if(n=i-t.get(),r.setStyle(e.getContainer(),"height",i+"px"),t.set(i),function(e){e.fire("ResizeEditor")}(e),y.browser.isSafari()&&y.mac){var m=e.getWin();m.scrollTo(m.pageXOffset,m.pageYOffset)}e.hasFocus()&&e.selection.scrollIntoView(e.selection.getNode()),y.webkit&&n<0&&p(e,t)}}};!function t(){e.add("autoresize",function(e){if(e.settings.hasOwnProperty("resize")||(e.settings.resize=!1),!e.inline){var t=i(0);!function(e,t){e.addCommand("mceAutoResize",function(){p(e,t)})}(e,t),function(t,e){t.on("init",function(){var e=function(e){return e.getParam("autoresize_overflow_padding",1,"number")}(t);t.dom.setStyles(t.getBody(),{paddingLeft:e,paddingRight:e,"min-height":0})}),t.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",function(){p(t,e)}),function(e){return e.getParam("autoresize_on_init",!0,"boolean")}(t)&&t.on("init",function(){u(t,e,20,100,function(){u(t,e,5,1e3)})})}(e,t)}})}()}();