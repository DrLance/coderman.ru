(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{179:function(e,t,a){a(180),e.exports=a(470)},180:function(e,t,a){a(181),a(381),a(382),a(380)},181:function(e,t,a){window.axios=a(41),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var n=document.head.querySelector('meta[name="csrf-token"]');n?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=n.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token")},380:function(e,t){},381:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(31),s=a.n(l),o=a(10),c=a.n(o),i=a(11),d=a.n(i),m=a(12),u=a.n(m),h=a(13),f=a.n(h),p=a(14),y=a.n(p),g=a(8),v=a.n(g),b=a(18),w=a.n(b),E=a(41),x=a.n(E),k=function(e){function t(){return c()(this,t),u()(this,f()(t).apply(this,arguments))}return y()(t,e),d()(t,[{key:"render",value:function(){return r.a.createElement("tr",{className:"hover:shadow border-b border-border fadeIn animated "},this.props.children)}}]),t}(r.a.PureComponent),N=r.a.createContext({filter:{keywords:[],types:[]},changeFilter:function(){}}),S=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=u()(this,(e=f()(t)).call.apply(e,[this].concat(r))),w()(v()(a),"state",{data:[]}),a}return y()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this;axios.post("api/getDayStats",{}).then((function(t){var a=t.data;e.setState({data:a})}))}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement("div",{className:"hidden md:flex md:pl-4 "},r.a.createElement("div",{className:"shadow pl-4 px-3 py-2 rounded w-full"},r.a.createElement("p",{className:"uppercase text-center text-sm font-bold text-heading"},"статистика ",r.a.createElement("br",null),"за текущий день"),r.a.createElement("ul",{className:"mt-3 flex flex-wrap"},e.map((function(e,t){var a="storage/type/"+e.img_url;return r.a.createElement("li",{key:t+"_url",className:"flex flex-col rounded border border-border m-1 items-center p-2"},r.a.createElement("img",{className:"h-4 ",src:a,alt:""}),r.a.createElement("span",{className:"font-bold text-content"},e.project_count))})))))}}]),t}(r.a.Component),C=function(e){function t(e){var a;c()(this,t),a=u()(this,f()(t).call(this,e));var n=localStorage.getItem("coderman_filter");return n?(n=JSON.parse(n),a.state={types:[],keywords:n.keywords,selectedType:n.selectedType,selectedRegion:n.selectedRegion}):a.state={types:[],keywords:[],selectedType:0,selectedRegion:"en"},a.onChangeType=a.onChangeType.bind(v()(a)),a.onAddKeyword=a.onAddKeyword.bind(v()(a)),a.onRemoveKeyword=a.onRemoveKeyword.bind(v()(a)),a.onChangeRegion=a.onChangeRegion.bind(v()(a)),a.refKeyword=r.a.createRef(),a}return y()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this;x.a.post("api/getTypes").then((function(t){var a=t.data;e.setState({types:a})}))}},{key:"onChangeType",value:function(e,t){var a=this;this.setState({selectedType:e.target.value},(function(){a.props.onChangeFilter&&a.props.onChangeFilter(a.state)}))}},{key:"onChangeRegion",value:function(e,t){var a=this;this.setState({selectedRegion:e.target.value},(function(){a.props.onChangeFilter&&a.props.onChangeFilter(a.state)}))}},{key:"onAddKeyword",value:function(e){var t=this;if("Enter"===e.key){var a=this.state.keywords;a.push(e.target.value),e.target.value&&this.setState({keywords:a},(function(){t.props.onChangeFilter&&t.props.onChangeFilter(t.state)})),e.target.value=null}}},{key:"onRemoveKeyword",value:function(e){var t=this,a=this.state.keywords,n=e.target.attributes.getNamedItem("data-keyword").value,r=a.filter((function(e){return e!==n&&""!==e}));this.setState({keywords:r},(function(){t.props.onChangeFilter&&t.props.onChangeFilter(t.state)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.types,n=t.keywords,l=t.selectedType,s=t.selectedRegion;return r.a.createElement("aside",{id:"filter-side",className:"md:w-3/12 order-0 md:order-1 flex flex-col md:flex md:flex-col"},r.a.createElement("div",{className:"w-full md:pl-4 mb-5"},r.a.createElement("div",{className:"shadow pl-4 px-3 py-2 rounded"},r.a.createElement("p",{className:"uppercase p-2 text-center text-sm font-bold text-heading"},"фильтр"),r.a.createElement("label",{htmlFor:"filter_type",className:"flex flex-col text-heading"},"Фриланс биржа",r.a.createElement("select",{className:"mb-5 mt-1 py-1 border-b border-border mb-3 text-lg",name:"filter_type",onChange:this.onChangeType,value:l},r.a.createElement("option",{value:"0"},"Все"),a.map((function(e,t){return r.a.createElement("option",{key:e.id+"_opt",value:e.id},e.name)})))),r.a.createElement("label",{className:"mb-3 w-full text-heading",htmlFor:"keywords"},"Ключевые слова",r.a.createElement("div",{className:"flex flex-wrap mb-2 w-full"},n.map((function(t,a){return r.a.createElement("div",{ref:e.refKeyword,key:t+"_keyword"+a,className:"pl-2 shadow mr-2 mt-1 text-blue"},t,r.a.createElement("span",{className:"pl-2 pr-2 text-heading hover:text-blue","data-keyword":t,onClick:e.onRemoveKeyword},"x"))}))),r.a.createElement("input",{name:"keywords",className:"focus:outline-none border-b border-border w-full",onKeyPress:this.onAddKeyword})),r.a.createElement("label",{className:"mt-3 w-full text-heading flex flex-col",htmlFor:"regions"},"Регион",r.a.createElement("select",{name:"regions",className:"mb-5 mt-1 py-1 border-b border-border mb-3 text-lg pl-0",value:s,onChange:this.onChangeRegion},r.a.createElement("option",{value:"ru"},"Ru"),r.a.createElement("option",{value:"en"},"En"))))),r.a.createElement(S,null))}}]),t}(r.a.Component);w()(C,"contextType",N);var D=C,F=function(e){function t(e){var a;c()(this,t),a=u()(this,f()(t).call(this,e)),w()(v()(a),"saveLocalStorage",(function(){var e=a.state.filter,t=e.selectedType,n={keywords:e.keywords,selectedType:t};localStorage.setItem("coderman_filter",JSON.stringify(n))})),w()(v()(a),"onLoadMore",(function(){var e=a.state.filter;e.show+=10,a.setState(e,(function(){a.syncData()}))}));var n=localStorage.getItem("coderman_filter"),r={show:25};return n&&(r={keywords:(n=JSON.parse(n)).keywords,selectedType:n.selectedType,show:25}),a.state={tableHeaders:[{name:"Ссылка",type:"url",classes:" flex items-center text-sm py-1"},{name:"Дата",type:"date_published_at",classes:" hidden md:table-cell md:flex md:items-center md:justify-center text-sm"}],data:[],dataInterval:null,filter:r},a.syncData=a.syncData.bind(v()(a)),a.changeFilter=a.changeFilter.bind(v()(a)),a}return y()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this;this.syncData(),this.interval=setInterval((function(){return e.syncData()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"syncData",value:function(){var e=this,t=this.state.filter;x.a.post("/api/getData",{filter:t}).then((function(t){var a=t.data;e.setState({data:a})}))}},{key:"changeFilter",value:function(e){var t=this,a=e,n=this.state.filter;a.show=n.show,this.setState({filter:a},(function(){t.syncData(),t.saveLocalStorage()}))}},{key:"showDescription",value:function(e,t){t.preventDefault();var a=document.getElementById(e+"_description");a.classList.contains("hidden")?a.classList.remove("hidden"):a.classList.add("hidden")}},{key:"render",value:function(){var e=this,t=this.state,a=t.tableHeaders,n=t.data;return n.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"md:w-9/12 order-1 flex flex-col"},r.a.createElement("table",{className:"table-auto w-full shadow"},r.a.createElement("thead",null,r.a.createElement("tr",null,a.map((function(e,t){return r.a.createElement("th",{key:t+"_th",className:"hidden md:table-cell px-6 uppercase border-b border-border text-heading "},e.name)})))),r.a.createElement("tbody",null,n.map((function(t,n){return r.a.createElement(k,{key:t.id+"_tr"},a.map((function(a,n){var l=a.classes+" flex-wrap",s=t[a.type];s.trim();var o=s;if(t.type&&"url"===a.type)return r.a.createElement("td",{className:l,key:n+"_td"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement("img",{className:"mx-2 w-4 ",src:"/storage/type/"+t.type.img_url,alt:""}),r.a.createElement("a",{target:"_blank",href:t.url},t.title),r.a.createElement("a",{href:"_blank",onClick:e.showDescription.bind(null,t.id),className:"ml-2 text-blue text-xs"},"подробнее...")),r.a.createElement("p",{id:t.id+"_description",className:"hidden ml-8 pb-2 w-full text-sm"},t.description));var c=new Date(o);return r.a.createElement("td",{className:l+" text-center",key:n+"_td"},r.a.createElement("span",{className:""},c.toLocaleDateString()))})))})))),r.a.createElement("button",{onClick:this.onLoadMore,className:"text-heading self-center mt-5 py-2 px-4 shadow rounded border border-gray-400 hover:bg-gray-100"},"Load More")),r.a.createElement(D,{onChangeFilter:this.changeFilter})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex items-center justify-center  md:w-9/12"},r.a.createElement("span",{className:"animated infinite fadeIn delay-2s text-center"},"Загрузка...")),r.a.createElement(D,{onChangeFilter:this.changeFilter}))}}]),t}(r.a.Component),_=function(e){function t(){return c()(this,t),u()(this,f()(t).apply(this,arguments))}return y()(t,e),d()(t,[{key:"render",value:function(){return r.a.createElement(F,null)}}]),t}(r.a.Component);document.getElementById("table")&&s.a.render(r.a.createElement(_,null),document.getElementById("table"))},382:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(31),s=a.n(l),o=a(10),c=a.n(o),i=a(11),d=a.n(i),m=a(12),u=a.n(m),h=a(13),f=a.n(h),p=a(8),y=a.n(p),g=a(14),v=a.n(g),b=a(18),w=a.n(b),E=a(25),x=function(e){function t(e){var a;c()(this,t),a=u()(this,f()(t).call(this,e)),w()(y()(a),"changeDate",(function(e,t){if("start"===e){var n=new Date(t.target.value);n=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),a.setState({dateStart:n},(function(){a.fetchData()}))}else if("end"===e){var r=new Date(t.target.value);r=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate(),a.setState({dateEnd:r},(function(){a.fetchData()}))}}));var n=new Date,r=new Date;return r.setMonth(r.getMonth()-1),a.state={dateStart:r.toISOString().substr(0,10),dateEnd:n.toISOString().substr(0,10),data:[]},a.fetchData=a.fetchData.bind(y()(a)),a}return v()(t,e),d()(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this,t=this.state,a={dateStart:t.dateStart,dateEnd:t.dateEnd};axios.post("/api/getStats",{filter:a}).then((function(t){var a=t.data;e.setState({data:a})}))}},{key:"render",value:function(){var e=this,t=new Date;t=t.toISOString().substr(0,10);var a=document.getElementById("charts").getClientRects()[0].width;return r.a.createElement("div",{className:"flex flex-col"},r.a.createElement("label",{className:"text-center text-bold mb-10 text-content"},"Период c",r.a.createElement("input",{className:"ml-2 w-25 border border-border",type:"date",defaultValue:this.state.dateStart,onChange:function(t){return e.changeDate("start",t)},max:t}),r.a.createElement("span",{className:"mx-2"},"по"),r.a.createElement("input",{className:"w-25 border border-border",type:"date",defaultValue:this.state.dateEnd,onChange:function(t){return e.changeDate("end",t)}})),r.a.createElement(E.b,{data:this.state.data,width:a,height:350},r.a.createElement(E.c,{strokeDasharray:"3 3"}),r.a.createElement(E.e,{dataKey:"name"}),r.a.createElement(E.f,{label:{value:"Кол-во заказов",angle:-90,position:"insideLeft"}}),r.a.createElement(E.d,null),r.a.createElement(E.a,{type:"monotone",dataKey:"uv",fill:"#8884d8",barSize:60})))}}]),t}(r.a.Component);document.getElementById("charts")&&s.a.render(r.a.createElement(x,null),document.getElementById("charts"))},470:function(e,t){}},[[179,1,2]]]);